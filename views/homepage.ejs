
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active"><a href="#">Link</a></li>
                <li><a href="#">Link</a></li>
        </div><!--/.navbar-collapse -->
    </div>
</nav>

<div class="container-fluid">
    <div class="row">
        <div class="col-xs-2"></div>
        <div class="col-xs-8"><h1>Change!</h1></div>
        <div class="col-xs-2"></div>
    </div>
    <div class="row">
        <fieldset>
            <% for(var i in classes) {
                var c = classes[i];
            %>
            <label>
                <input type="radio" name="selectedClass" value="<%=c.id%>" onchange="classChanged()"> <%= c.name%>
            </label>
            <% } %>
        </fieldset>
    </div>
    <% for(var i in classes) {
        var c = classes[i];
    %>
    <div class="row class-<%= c.id%>">
        <div class="col-md-12">
            <b><%= c.name%>:</b>
            <%
            for(var i in challenges) {
                var chal = challenges[i];
            %>
            <%= chal.name%>: <i class="fa fa-<%= (c.solved.indexOf(chal.id) != -1)?"check":"remove" %>"></i>
            <% } %>
        </div>
    </div>
            <% } %>
    <div class="row">
        <div class="col-md-1">
            <canvas id="chart" ></canvas>
        </div>
        <div>
            <form class="form-horizontal" action="/class/create" method="post" onsubmit="setTimeout(function () { window.location.reload(); }, 10)">
                <fieldset>
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="class">Class</label>  
                        <div class="col-md-2">
                            <input id="class" name="name" placeholder="5A" class="form-control input-md" required="" type="text">
                            
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-md-4 control-label" for="addClass"></label>
                        <div class="col-md-4">
                            <button type="submit" class="btn btn-primary">Add</button>
                        </div>
                    </div>
                </fieldset>
            </form>
        </div>
    </div>
    <hr>
    <footer>
        <p>&copy; Company 2013</p>
    </footer>
</div> <!-- /container -->
<script type="text/javascript">
 var classes = <%- JSON.stringify(classes) %>;
 var challenges = <%- JSON.stringify(challenges) %>;
 drawLineChart(classes, document.getElementById("chart"));

 // load old class from localStorage and fallback if not existent
 var selectedClass = localStorage.getItem("selectedClass");
 if(!selectedClass || !_.findWhere(classes, {id: +selectedClass})) {
     selectedClass = $("input[name=selectedClass]").first().val();
 }
 $("input[name=selectedClass][value=" + selectedClass + "]").prop("checked", true);
 setClass(selectedClass);

 function setClass(newClass) {
     console.log("setClass:", newClass);

     $(".class-" + selectedClass).removeClass("selected");

     selectedClass = newClass;
     localStorage.setItem("selectedClass", selectedClass);

     $(".class-" + selectedClass).addClass("selected");
 }
 
 function classChanged() {
     setClass($("input[name=selectedClass]:checked").val());
 }
</script>
